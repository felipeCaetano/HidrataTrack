#:import get_color_from_hex kivy.utils.get_color_from_hex

<CreateUserScreen>:
    MDTopAppBar:
        type: "small"
        pos_hint: {"center_x": .5, "top": 1}

        MDTopAppBarLeadingButtonContainer:
            # pos_hint: {"center_x": .1, "center_y": .95}
            MDActionTopAppBarButton:
                icon: "arrow-left"

        MDTopAppBarTitle:
            text: "Criar Usuário"
            # pos_hint: {"center_x": .5, "center_y": .95}

        MDTopAppBarTrailingButtonContainer:
            # pos_hint: {"center_x": .9, "center_y": .95}
            MDActionTopAppBarButton:
                icon: "account-circle-outline"
    
    MDFloatLayout:
        md_bg_color: self.theme_cls.backgroundColor
        pos_hint: {'center_x':.5, 'top': .91}
        MDAnchorLayout:
            size_hint: 1, None
            height: "120dp"  # Ajuste este valor conforme necessário
            padding: "10dp"
            pos_hint: {"center_x": .5, "center_y": .85}
            
            FitImage:
                source: "assets/hidratatrack.png"
                size_hint: None, None
                size: "120dp", "120dp"  # Ajuste este valor conforme necessário
                pos_hint: {"center_x": .5, "center_y": .5}
        MDCard:
            orientation: 'vertical'
            size_hint: None, None
            size: "300dp", "400dp"
            pos_hint: {"center_x": .5, "center_y": .5}
            padding: "20dp"
            spacing: "30dp"
            elevation: 3
            adaptive_height: True
        
            MDLabel:
                pos_hint: {'center_x':.5, 'top': .5}
                text: 'Escolha seu login e senha'
                halign: "center"
                theme_text_color: "Custom"
                text_color: "red"
            
            MDTextField:
                id: login
                mode: "outlined"
                required: True
                size_hint_x: None
                width: "240dp"
                pos_hint: {"center_x": .5, "center_y": .5}
                write_tab: False

                MDTextFieldLeadingIcon:
                    icon: "account"
                MDTextFieldHintText:
                    text: "Login"
                MDTextFieldHelperText:
                    text: "Digite seu nome de usuário"

            MDTextField:
                id: email
                mode: "outlined"
                required: True
                size_hint_x: None
                width: "240dp"
                pos_hint: {"center_x": .5, "center_y": .5}
                write_tab: False
                validator: 'email'

                MDTextFieldLeadingIcon:
                    icon: "email"
                MDTextFieldHintText:
                    text: "email"
                MDTextFieldHelperText:
                    mode: 'on_error'
                    text: "Digite um email válido"

            MDTextField:
                id: password
                mode: "outlined"
                required: True
                size_hint_x: None
                width: "240dp"
                pos_hint: {"center_x": .5, "center_y": .5}
                write_tab: False
                password: True

                MDTextFieldHintText:
                    text: "Senha"
                MDTextFieldHelperText:
                    text: "Digite sua senha"
                MDTextFieldLeadingIcon:
                    icon: "key-variant"

            MDButton:
                style: "filled"
                pos_hint: {"center_x": .5}
                size_hint_x: .8
                md_bg_color: get_color_from_hex("#2196F3")
                on_release: root.create_user()
                MDButtonText:
                    text: "Salvar"
